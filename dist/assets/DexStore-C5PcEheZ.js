import{u as J,z as L,A as N,f as C,B as V,C as G,D as I,E as H,G as U,H as R,I as B}from"./index-CQEE4EVN.js";function K(e){return I()?(H(e),!0):!1}function F(e){return typeof e=="function"?e():J(e)}const q=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Q=Object.prototype.toString,X=e=>Q.call(e)==="[object Object]",Y=()=>{};function Z(e,n){function t(...o){return new Promise((i,a)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(i).catch(a)})}return t}const P=e=>e();function ee(e=P){const n=C(!0);function t(){n.value=!1}function o(){n.value=!0}const i=(...a)=>{n.value&&e(...a)};return{isActive:V(n),pause:t,resume:o,eventFilter:i}}function te(e){return U()}function ne(e,n,t={}){const{eventFilter:o=P,...i}=t;return G(e,Z(o,n),i)}function re(e,n,t={}){const{eventFilter:o,...i}=t,{eventFilter:a,pause:f,resume:g,isActive:p}=ee(o);return{stop:ne(e,n,{...i,eventFilter:a}),pause:f,resume:g,isActive:p}}function oe(e,n=!0,t){te()?L(e,t):n?e():N(e)}function ae(e){var n;const t=F(e);return(n=t==null?void 0:t.$el)!=null?n:t}const O=q?window:void 0;function x(...e){let n,t,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,i]=e,n=O):[n,t,o,i]=e,!n)return Y;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const a=[],f=()=>{a.forEach(d=>d()),a.length=0},g=(d,c,h,m)=>(d.addEventListener(c,h,m),()=>d.removeEventListener(c,h,m)),p=G(()=>[ae(n),F(i)],([d,c])=>{if(f(),!d)return;const h=X(c)?{...c}:c;a.push(...t.flatMap(m=>o.map(v=>g(d,m,v,h))))},{immediate:!0,flush:"post"}),u=()=>{p(),f()};return K(u),u}const A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},D="__vueuse_ssr_handlers__",ie=se();function se(){return D in A||(A[D]=A[D]||{}),A[D]}function ue(e,n){return ie[e]||n}function ce(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const le={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},$="vueuse-storage";function fe(e,n,t,o={}){var i;const{flush:a="pre",deep:f=!0,listenToStorageChanges:g=!0,writeDefaults:p=!0,mergeDefaults:u=!1,shallow:d,window:c=O,eventFilter:h,onError:m=r=>{console.error(r)},initOnMounted:v}=o,w=(d?R:C)(typeof n=="function"?n():n);if(!t)try{t=ue("getDefaultStorage",()=>{var r;return(r=O)==null?void 0:r.localStorage})()}catch(r){m(r)}if(!t)return w;const y=F(n),_=ce(y),S=(i=o.serializer)!=null?i:le[_],{pause:W,resume:j}=re(w,()=>T(w.value),{flush:a,deep:f,eventFilter:h});c&&g&&oe(()=>{t instanceof Storage?x(c,"storage",b):x(c,$,z),v&&b()}),v||b();function k(r,s){if(c){const l={key:e,oldValue:r,newValue:s,storageArea:t};c.dispatchEvent(t instanceof Storage?new StorageEvent("storage",l):new CustomEvent($,{detail:l}))}}function T(r){try{const s=t.getItem(e);if(r==null)k(s,null),t.removeItem(e);else{const l=S.write(r);s!==l&&(t.setItem(e,l),k(s,l))}}catch(s){m(s)}}function M(r){const s=r?r.newValue:t.getItem(e);if(s==null)return p&&y!=null&&t.setItem(e,S.write(y)),y;if(!r&&u){const l=S.read(s);return typeof u=="function"?u(l,y):_==="object"&&!Array.isArray(l)?{...y,...l}:l}else return typeof s!="string"?s:S.read(s)}function b(r){if(!(r&&r.storageArea!==t)){if(r&&r.key==null){w.value=y;return}if(!(r&&r.key!==e)){W();try{(r==null?void 0:r.newValue)!==S.write(w.value)&&(w.value=M(r))}catch(s){m(s)}finally{r?N(j):j()}}}}function z(r){b(r.detail)}return w}function pe(e,n,t={}){const{window:o=O}=t;return fe(e,n,o==null?void 0:o.localStorage,t)}function de(e,n){return`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/${e.generation}/${e.game}/${n}.png`}function ge(){const e="https://pokeapi.co/api/v2";return{async getGenerationFromGame(n){const o=await(await fetch(`${e}/version/${n.toLowerCase()}`)).json();return(await(await fetch(`${e}/version-group/${o.version_group.name}`)).json()).generation},async getGenerationDex(n){return(await(await fetch(`${e}/generation/${n.name}`)).json()).pokemon_species},async getPokemon(n){return await(await fetch(`${e}/pokemon/${n}`)).json()}}}const E=ge(),we=B("dexStore",()=>{const e=pe("dexes",new Map);async function n(a){const f=await E.getGenerationFromGame(a.game),g=await E.getGenerationDex(f);console.log(g.pokemon_species),a.pokemon=(await Promise.all(g.map(async p=>{const u=await E.getPokemon(p.name);return{id:u.id,name:u.name,caught:!1,needsEvolution:!1,sprite:de(a.spriteType,u.id)}}))).sort((p,u)=>p.id-u.id),e.value.set(crypto.randomUUID(),a)}function t(a){return e.value.get(a)}function o(a,f){e.value.set(a,f)}function i(a){e.value.delete(a)}return{dexes:e,addDex:n,deleteDex:i,getDex:t,updateDex:o}});export{we as u};
